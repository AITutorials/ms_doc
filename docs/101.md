
### 项目背景概述


* 近年来，短视频直播产业飞速发展，成为移动互联网时代新兴的“宠儿”。同时，越来越多的公司也踏足该领域，在平台上建设完善的直播产业链，AI技术也在其中发挥着重要的作用。

* 在直播领域，主播是平台的核心角色，头部主播往往形成对平台的“流量垄断”，因此头部主播的流失会对平台造成重大打击。为了保证主播梯队健康分布，削弱平台对头部主播的依赖，扶持素人主播保证其开播率和留存成为平台方主要关注的方向。

* 由于素人主播往往没有直播经验，对直播间用户的对话和行为没有更多的心理建设以及应对方法。因此基于NLP技术的“场控机器人”应运而生，除了一些规则类逻辑，比如：自动点赞，刷礼物自动感谢等，根据直播间内容进行自动提示/回复是重要的功能之一，该功能会采集直播间用户的对话内容，根据内容进行“情感分析”，主要分为：积极（对素人主播的赞赏，夸奖，称赞），中性（一般直播间闲聊对话），消极（对素人主播的诋毁，打击）我们项目将以“情感分析功能”为主，详细介绍和实现它的模型发展路径和部署细节。






### 项目内容概述


* 早期的情感分析往往从单句角度出发，用户每一次发送内容，就会基于此进行一次判断，由于场景的限定，单次用户发送内容长度很短，往往蕴含的语义并不明确，随着对情感分析任务的深入理解，发现当前对话的内容的情感标签往往和上文有一定关联，因此以句子对（当前句的上一句+当前句）作为输入成为主流的处理方式，再加上直播间闲聊内容的多样性，这里我们选择bert多语言版本作为基础模型进行训练，并在此基础上实现工业界的一系列优化措施。

* 我们的项目主要任务将围绕：

	* 直播间对话数据介绍与数据分析
	* 构建情感分析模型服务
	* 使用BERT系列模型训练获得基线指标
	* 使用标签平滑技术进行指标优化
	* 使用SWA优化器进行指标优化
	* 使用CLS权重分配技术进行指标优化
	* 通过badcase分析进行回译数据增强


这些优化措施是重要的工程经验，也是将来工程师岗位面试的重点。



### 项目所需技术

* 为了能够帮助我们更好的完成项目，需要同学们对以下的工具和知识有一定的掌握：
	* 所有的代码开发基于Python3
	* 模型框架选择主流的Huggingface
	* 模型框架代码选择Pytorch
	* 自然语言方面需要掌握Transformer



### 项目架构


*  项目架构说明

图片: https://uploader.shimo.im/f/JoRkFPABMPSCiAoW.png!thumbnail?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJhdWQiOiJhY2Nlc3NfcmVzb3VyY2UiLCJleHAiOjE2NDg3MjY2NjgsImciOiI5MDMwTW5ObUVwVW93NXF3IiwiaWF0IjoxNjQ4NzI2MzY4LCJ1c2VySWQiOjIxNzMzNTY4fQ.8lmakKwFs1elFBsrR3UjSKYo-6WlVWVqo4KNHCeifwY



* 从架构中可以看出，系统会捕捉具有时效性的文本对作为模型输入，首先文本会过最基础的“合规过滤”，然后进行情感分析模型阶段，如果判定为积极（P）对话，场控机器人会提醒主播进行感谢回复（因为才艺主播往往没有打字时间，只需点击即可回复感谢），及时响应观众来合理圈粉。如果判定消极（N）的，场控机器人提醒主播屏蔽该用户发言或者选择踢出直播间。对于中性（M）对话，场控机器人会自动生成回复，这个由后面的对话生成系统来执行。



### 项目规划

* 我们的整个项目将分为四个任务：直播间对话数据分析与模型服务构建，使用BERT系列模型训练获得基线指标，使用标签平滑技术和SWA优化器进行指标优化，通过CLS权重分配技术和回译数据增强进行指标优化。每个项目大致一周的开发工作量。下面将逐个介绍这些任务的目的，所需工时以及简述。



#### 任务一：直播间对话数据分析与模型服务构建

* 目的：
	* 了解直播间对话数据形式，以及对该类型数据进行一系列数据分析工作；并建立对应的模型服务。
* 工时：
	* 一周
* 任务简述：
	* 对于每一个AI项目来讲，早期对数据进行理解和分析都是必不可少的环节，在这里，我们将详细介绍数据形态，标签含义，还会对数据进行长度分布，标签数量分布来获取之后使用模型时用到的参数。除此之外，搭建一个模型示例服务，来对外提供API，待之后的任务完成最终模型训练后进行部署。



#### 任务二：使用BERT系列模型训练获得基线指标

* 目的：
	* 使用BERT系列模型训练获得基线指标并进行超参数调优
* 工时：
	* 一周
* 任务简述：
	* 在当前任务中，我们将使用经典的BERT多语言模型建立指标基线，借助huggingface提供的工具完成该过程。与此同时，还会对重要的超参数，如lr，weight decay等进行一些调整，来提升基线水平。


#### 任务三：使用标签平滑技术和SWA优化器进行指标优化

* 目的：
	* 实现标签平滑损失和SWA优化器，并将其应用在基线模型上来提升指标。
* 工时：
	* 一周
* 任务简述：
	* 在当前任务中，我们将学习标签平滑的有关内容，阐述它的应用场景，并最终将其放在模型源码中以优化指标；同时还有介绍SWA优化器原理和使用方法，通过实现对原有优化器的替换来进一步获得更好的效果。

#### 任务四：通过CLS权重分配技术和回译数据增强进行指标优化

* 目的：
	* 通过CLS权重分配技术以及badcase分析后的回译数据增强，来修改模型结构并对指定case进行回译数据增强来提升指标
* 工时：
	* 一周
* 任务简述：
	* 在当前任务中，我们会更深一步的理解项目，分析出针对该项目的类型的独有优化方案：CLS权重分配技术，并且会对测试集的badcase进行分析，从而进行回译数据增强，并实现这些过程。


